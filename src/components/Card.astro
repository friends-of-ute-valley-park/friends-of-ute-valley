---
export interface Props {
  title: string;
  image: ImageMetadata;
  previewText: string;
  href: string | undefined;
  publishedOn: Date;
  canBeWide?: boolean | undefined;
}

const { title, image, publishedOn, href, previewText } = Astro.props as Props;

import { Image } from "astro:assets";
---

<a href={"/news/" + href} class="group block space-y-6">
  <article
    class="relative aspect-16/10 overflow-hidden bg-stone-200 border border-stone-300 group-hover:border-primary-dark transition-colors"
  >
    <Image
      src={image}
      width={800}
      quality="80"
      alt={title}
      class="w-full h-full object-cover transition-all duration-1000 scale-105 group-hover:scale-100"
    />

    <div
      class="absolute inset-0 border-[16px] border-white/10 pointer-events-none"
    >
    </div>

    <div
      class="absolute top-4 right-4 bg-primary-dark text-white px-2 py-1 font-mono text-[10px] uppercase tracking-widest"
    >
      {
        new Intl.DateTimeFormat("en-US", {
          month: "short",
          day: "2-digit",
          year: "numeric",
        }).format(new Date(publishedOn))
      }
    </div>

    <div
      class="absolute bottom-4 left-4 bg-white/90 px-3 py-1 border border-stone-200 opacity-0 group-hover:opacity-100 transition-opacity duration-500"
    >
      <span
        class="font-mono text-[10px] font-black uppercase tracking-widest text-primary-dark"
        >Read Dispatch â†’</span
      >
    </div>
  </article>

  <div class="space-y-3">
    <div class="flex items-center gap-3">
      <span
        class="inline-block h-px w-6 bg-stone-300 group-hover:bg-primary-dark transition-colors"
      ></span>
      <span
        class="font-mono text-[10px] font-black uppercase tracking-widest text-stone-500 group-hover:text-primary-dark transition-colors"
        >Dispatch No. {
          String(Math.floor(Math.random() * 1000)).padStart(3, "0")
        }</span
      >
    </div>
    <h3
      class="text-2xl font-serif font-black leading-tight text-stone-900 group-hover:text-primary-dark transition-colors uppercase tracking-tight"
    >
      {title}
    </h3>
    <p class="text-sm text-stone-600 font-medium line-clamp-2 leading-relaxed">
      {previewText}
    </p>
  </div>
</a>

<style>
  @font-face {
    font-family: "EditorialSerif";
    src: local("Georgia"), local("Times New Roman"), serif;
  }
  .font-serif {
    font-family: "EditorialSerif", serif;
  }
</style>
