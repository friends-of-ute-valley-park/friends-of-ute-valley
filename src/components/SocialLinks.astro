---
import { getCollection } from 'astro:content';
import InstagramIcon from '~icons/mdi/instagram';
import FacebookIcon from '~icons/mdi/facebook';
import GithubIcon from '~icons/mdi/github';

const iconComponents: Record<string, typeof FacebookIcon> = {
  facebook: FacebookIcon,
  instagram: InstagramIcon,
  github: GithubIcon,
};

const hoverStyles: Record<string, string> = {
  facebook: 'hover:text-primary hover:border-primary',
  instagram: 'hover:text-secondary hover:border-secondary',
  github: 'hover:text-stone-900 hover:border-stone-900',
};

const socialLinks = (await getCollection('social-links')).sort(
  (a, b) => a.data.priority - b.data.priority,
);
---

<div class="relative flex space-x-4">
  {socialLinks.map((entry) => {
    const Icon = iconComponents[entry.data.icon];
    const hover = hoverStyles[entry.data.icon] ?? '';
    return (
      <a href={entry.data.link} class={`p-2 border border-stone-300 text-stone-500 ${hover} transition-all bg-white`} target="_blank" rel="noopener noreferrer">
        <span class="sr-only">{entry.data.title}</span>
        <Icon class="h-5 w-5" aria-hidden="true" />
      </a>
    );
  })}
</div>
