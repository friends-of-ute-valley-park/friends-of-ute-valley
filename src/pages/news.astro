---
import Layout from '@layouts/Layout.astro';
import Card from '@components/Card.astro';

import { getCollection } from 'astro:content';
const publishedNewsEntries = await getCollection('news', ({ data }) => {
  return data.published === true;
});
---

<Layout title="News">
  <main class="bg-stone-50 text-stone-900">
    <!-- News Header -->
    <section class="border-b border-stone-300">
      <div class="mx-auto max-w-(--breakpoint-2xl) px-4 sm:px-6 lg:px-8 py-16 lg:py-24">
        <div class="flex items-center gap-4 mb-8">
          <span class="inline-block h-px w-12 bg-primary-dark"></span>
          <span class="font-mono text-[10px] font-black tracking-[0.2em] uppercase text-stone-500">
            Field Notes â€” UVP_COMM_LOG
          </span>
        </div>
        
        <h1 class="text-6xl sm:text-9xl font-serif font-black tracking-tighter leading-none text-stone-900 uppercase">
          Latest <br /> <span class="text-primary-dark">News.</span>
        </h1>

        <p class="mt-8 max-w-2xl text-xl font-medium leading-relaxed text-stone-700">
          Official communication regarding trail maintenance, ecological surveys, and community operations within Ute Valley Park.
        </p>
      </div>
    </section>

    <!-- News Grid -->
    <section class="border-b border-stone-300 bg-stone-100/50">
      <div class="mx-auto max-w-(--breakpoint-2xl) px-4 sm:px-6 lg:px-8 py-24">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16">
          {
            publishedNewsEntries
              .sort((a, b) => new Date(b.data.publishedOn).getTime() - new Date(a.data.publishedOn).getTime())
              .map((post) => (
                <Card 
                  title={post.data.title} 
                  previewText={post.data.previewText} 
                  image={post.data.coverImage} 
                  href={post.id} 
                  publishedOn={post.data.publishedOn} 
                />
              ))
          }
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  @font-face {
    font-family: "EditorialSerif";
    src: local("Georgia"), local("Times New Roman"), serif;
  }
  .font-serif {
    font-family: "EditorialSerif", serif;
  }
</style>