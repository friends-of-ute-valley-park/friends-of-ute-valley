---
import Layout from '@layouts/Layout.astro';
import Card from '@components/Card.astro';

const newsPosts = await Astro.glob('../pages/news/*.md');
---

<Layout title="News">
  <div class="mx-2 bg-white">
    <h1 class="mb-8 mt-16 text-center text-3xl font-extrabold leading-8 tracking-tight text-gray-900 sm:text-4xl sm:leading-10">News From Ute Valley Park</h1>
    <div class="mx-auto mt-16 grid max-w-2xl auto-rows-fr grid-cols-1 gap-8 sm:mt-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">
      {
        newsPosts
          .sort((a, b) => new Date(a.frontmatter.publishedOn).getTime() - new Date(b.frontmatter.publishedOn).getTime())
          .reverse()
          .map((post) => (
            <Card
              title={post.frontmatter.title}
              previewText={post.frontmatter.previewText}
              image={post.frontmatter.coverImage}
              href={post.url}
              publishedOn={post.frontmatter.publishedOn}
              minutesRead={post.frontmatter.minutesRead}
            />
          ))
      }
    </div>
  </div>
</Layout>
