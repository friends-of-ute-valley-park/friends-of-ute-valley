---
import Layout from '@layouts/Layout.astro';
import Card from '@components/Card.astro';
import LeaveNoTrace from '@components/LeaveNoTrace.astro';
import EmailForm from '@components/EmailForm.vue';

import ChevronRightIcon from '~icons/heroicons/chevron-right';
import { Image, Picture } from 'astro:assets';
import heroImage from '../assets/images/ute-valley-park-hero.jpg';
import heroImage2 from '../assets/images/ute-valley-park-hero-2.jpg';
import heroImage3 from '../assets/images/ute-valley-park-hero-3.jpg';
import cta from '../assets/images/volunteer-5.jpg';

import { getCollection } from 'astro:content';
import StatsCard from '@components/StatsCard.astro';
const publishedNewsEntries = await getCollection('news', ({ data }) => {
  return data.published === true;
});
---

<Layout title="Home">
  <style>
    /* Floating Animation for Images */
    @keyframes float {
      0% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
      100% {
        transform: translateY(0px);
      }
    }
    .float-slow {
      animation: float 9s ease-in-out infinite;
    }
    .float-medium {
      animation: float 8s ease-in-out infinite;
      animation-delay: 1s;
    }
    .float-fast {
      animation: float 7s ease-in-out infinite;
      animation-delay: 2s;
    }

    .bg-grid {
      background-size: 40px 40px;
      mask-image: linear-gradient(to bottom, transparent, black, transparent);
      -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 1) 10%, rgba(0, 0, 0, 1) 90%, rgba(0, 0, 0, 0) 100%);
    }
  </style>
  <div class="relative isolate mt-2 overflow-hidden bg-white">
    <div class="bg-grid bg-grid-pattern dark:bg-grid-pattern-dark pointer-events-none fixed inset-0 z-0 h-full w-full opacity-50"></div>
    <div class="mx-auto mt-2 max-w-7xl px-6 pt-10 pb-24 sm:pb-32 lg:flex lg:px-8 lg:py-40">
      <div class="mx-auto max-w-2xl shrink-0 xl:mx-0 xl:max-w-xl xl:pt-8">
        <div class="mt-8 md:mt-16">
          <a href="/visit/" class="inline-flex items-center rounded-full bg-slate-800 p-1 pr-2 text-white hover:text-gray-200 sm:text-base lg:text-sm xl:text-base">
            <span class="rounded-full bg-green-600 px-3 py-0.5 text-sm leading-5 font-semibold text-white">VISIT PARK</span>
            <span class="ml-4 text-sm">Find out more</span>
            <ChevronRightIcon class="ml-2 h-5 w-5 text-gray-500" aria-hidden="true" />
          </a>
        </div>
        <h1 class="mt-10 text-4xl font-bold tracking-tight text-gray-900 sm:text-6xl">
          Friends of <span class="text-green-600">Ute Valley Park</span>
        </h1>
        <p class="mt-6 text-lg leading-8 text-gray-600">
          Friends of Ute Valley Park is an officially recognized "Friends" organization by the City of Colorado Springs. Our mission is to maintain, preserve, and provide education for this community
          treasure.
        </p>
        <div class="mt-10 flex items-center gap-x-6">
          <a
            href="/volunteer/"
            class="rounded-md bg-green-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600"
            >Volunteer</a
          >
          <a href="/donate/" class="text-sm leading-6 font-semibold text-gray-900">Donate <span aria-hidden="true">→</span></a>
        </div>
      </div>
      <div class="relative hidden h-[600px] w-full xl:block">
        <!-- Decorative background blob -->
        <div class="from-brand-100 dark:from-brand-900/20 absolute top-1/2 left-1/2 -z-10 h-[120%] w-[120%] -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-tr to-transparent blur-3xl">
        </div>

        <!-- Images -->
        <div
          class="reveal stagger-1 float-slow absolute top-0 right-30 z-30 h-auto w-72 rotate-3 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0">
          <div class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner">
            <Picture src={heroImage2} formats={['avif', 'webp']} width="300" height="450" alt="Seasons at Ute Valley Park" class="h-full w-full object-cover" />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span class="font-handwriting text-lg font-bold tracking-widest text-green-800 opacity-80"> TRAILS </span>
          </div>
        </div>

        <div
          class="reveal stagger-2 float-medium absolute top-80 right-10 z-20 h-auto w-72 -rotate-3 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0">
          <div class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner">
            <Picture src={heroImage} formats={['avif', 'webp']} width="300" height="450" alt="Seasons at Ute Valley Park" class="h-full w-full object-cover" />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span class="font-handwriting text-lg font-bold tracking-widest text-green-800 opacity-80"> VIEWS </span>
          </div>
        </div>

        <div
          class="reveal stagger-3 float-fast absolute top-48 left-10 z-10 h-auto w-72 rotate-6 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0">
          <div class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner">
            <Picture src={heroImage3} formats={['avif', 'webp']} width="300" height="450" alt="Views at Ute Valley Park" class="h-full w-full object-cover" />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span class="font-handwriting text-lg font-bold tracking-widest text-green-800 opacity-80"> SEASONS </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Newsletter -->

  <div class="relative bg-white py-16">
    <div class="mx-auto grid max-w-7xl grid-cols-1 gap-10 px-6 lg:grid-cols-12 lg:gap-8 lg:px-8">
      <div class="max-w-xl text-2xl font-bold tracking-tight text-gray-900 sm:text-4xl lg:col-span-6">
        <h2 class="inline sm:block lg:inline xl:block">Want events, news and updates?</h2>
        <p class="inline sm:block lg:inline xl:block">Sign up for our newsletter.</p>
      </div>
      <div class="w-full md:max-w-xl lg:col-span-6 lg:max-w-md lg:pt-2">
        <EmailForm client:idle />
      </div>
    </div>
  </div>

  <StatsCard />

  <!-- CTA -->
  <div class="bg-white">
    <div class="mx-auto max-w-7xl py-12 sm:px-6 sm:py-24 lg:px-8">
      <div class="relative isolate overflow-hidden bg-green-800 px-6 pt-16 shadow-2xl sm:rounded-3xl sm:px-16 md:pt-24 lg:flex lg:gap-x-20 lg:px-24 lg:pt-0">
        <svg
          viewBox="0 0 1024 1024"
          class="absolute top-1/2 left-1/2 -z-10 h-[64rem] w-[64rem] -translate-y-1/2 [mask-image:radial-gradient(closest-side,white,transparent)] sm:left-full sm:-ml-80 lg:left-1/2 lg:ml-0 lg:-translate-x-1/2 lg:translate-y-0"
          aria-hidden="true">
          <circle cx="512" cy="512" r="512" fill="url(#759c1415-0410-454c-8f7c-9a820de03641)" fill-opacity="0.7"></circle>
          <defs>
            <radialGradient id="759c1415-0410-454c-8f7c-9a820de03641">
              <stop stop-color="#7775D6"></stop>
              <stop offset="1" stop-color="#E935C1"></stop>
            </radialGradient>
          </defs>
        </svg>
        <div class="mx-auto max-w-md text-center lg:mx-0 lg:flex-auto lg:py-32 lg:text-left">
          <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Ready to help?</h2>
          <p class="mt-6 text-lg leading-8 text-gray-100">Donate or Volunteer today. Get involved and help Ute Valley Park by making a tax deductible donation or volunteering.</p>
          <div class="mt-10 flex items-center justify-center gap-x-6 lg:justify-start">
            <a
              href="/donate/"
              class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-xs hover:bg-gray-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"
              >Donate</a
            >
            <a href="/volunteer/" class="text-sm leading-6 font-semibold text-white">Volunteer<span aria-hidden="true">→</span></a>
          </div>
        </div>
        <div class="relative mt-16 h-80 lg:mt-8">
          <Image class="absolute top-0 left-0 w-[47rem] max-w-none rounded-md bg-white/5 ring-1 ring-white/10" src={cta} alt="Volunteers working on a fence" width="900" />
        </div>
      </div>
    </div>
  </div>

  <!-- News -->

  <div class="relative px-4 pt-16 pb-20 sm:px-6 lg:px-8 lg:pt-24 lg:pb-28">
    <div class="relative mx-auto max-w-7xl">
      <div class="text-center">
        <h2 class="text-3xl font-bold tracking-tight text-green-800 sm:text-4xl">Ute Valley Park News</h2>
        <p class="mt-2 text-lg leading-8 text-gray-600">Find out what is happening in and around Ute Valley Park</p>
      </div>
      <div class="mx-auto mt-16 grid max-w-2xl auto-rows-fr grid-cols-1 gap-8 sm:mt-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">
        {
          publishedNewsEntries
            .sort((a, b) => new Date(a.data.publishedOn).getTime() - new Date(b.data.publishedOn).getTime())
            .reverse()
            .splice(0, 3)
            .map((post) => <Card title={post.data.title} previewText={post.data.previewText} image={post.data.coverImage} href={post.id} publishedOn={post.data.publishedOn} canBeWide={false} />)
        }
      </div>
      <div class="mt-8 text-center">
        <a href="/news" class="font-semibold text-green-600 hover:text-green-800">More News</a>
      </div>
    </div>
  </div>

  <LeaveNoTrace />
</Layout>
