---
import Layout from "@layouts/Layout.astro";
import Card from "@components/Card.astro";
import LeaveNoTrace from "@components/LeaveNoTrace.astro";
import EmailFormWrapper from "@components/EmailFormWrapper.astro";

import ChevronRightIcon from "~icons/heroicons/chevron-right";
import { Image, Picture } from "astro:assets";
import heroImage from "../assets/images/ute-valley-park-hero.jpg";
import heroImage2 from "../assets/images/ute-valley-park-hero-2.jpg";
import heroImage3 from "../assets/images/ute-valley-park-hero-3.jpg";
import cta from "../assets/images/volunteer-5.jpg";

import { getCollection } from "astro:content";
import StatsCard from "@components/StatsCard.astro";
const publishedNewsEntries = await getCollection("news", ({ data }) => {
  return data.published === true;
});

const winterTips = [
  {
    title: "Stay on Marked Trails",
    description:
      "Snow can hide trail boundaries. Stick to visible paths to protect dormant vegetation and avoid disturbing wildlife habitats.",
    icon: "ü•æ",
  },
  {
    title: "Dress in Layers",
    description:
      "Colorado weather changes quickly. Bring layers, waterproof footwear, and traction devices for icy conditions.",
    icon: "üß•",
  },
  {
    title: "Respect Wildlife",
    description:
      "Winter is stressful for animals. Keep dogs leashed and give wildlife extra space during this vulnerable season.",
    icon: "ü¶å",
  },
  {
    title: "Pack Out Everything",
    description:
      "Even in snow, please carry out all trash and pet waste. Frozen waste doesn't disappear‚Äîit thaws in spring.",
    icon: "üóëÔ∏è",
  },
];
---

<Layout title="Home">
  <style>
    /* Floating Animation for Images */
    @keyframes float {
      0% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
      100% {
        transform: translateY(0px);
      }
    }
    .float-slow {
      animation: float 9s ease-in-out infinite;
    }
    .float-medium {
      animation: float 8s ease-in-out infinite;
      animation-delay: 1s;
    }
    .float-fast {
      animation: float 7s ease-in-out infinite;
      animation-delay: 2s;
    }

    /* Snowfall Animation */
    @keyframes snowfall {
      0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    .snowflake {
      position: absolute;
      color: #bae6fd;
      font-size: 1rem;
      animation: snowfall linear infinite;
      pointer-events: none;
    }

    .bg-grid {
      background-size: 40px 40px;
      mask-image: linear-gradient(to bottom, transparent, black, transparent);
      -webkit-mask-image: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0) 0%,
        rgba(0, 0, 0, 1) 10%,
        rgba(0, 0, 0, 1) 90%,
        rgba(0, 0, 0, 0) 100%
      );
    }

    /* Frosted Glass Effect */
    .frosted-glass {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
  </style>

  <!-- Hero Section with Winter Theme -->
  <div
    class="relative isolate overflow-hidden bg-gradient-to-b from-sky-50 via-white to-white"
  >
    <!-- Subtle snowflake decorations -->
    <div
      class="pointer-events-none absolute inset-0 overflow-hidden"
      aria-hidden="true"
    >
      <div
        class="snowflake"
        style="left: 10%; animation-duration: 15s; animation-delay: 0s;"
      >
        ‚ùÑ
      </div>
      <div
        class="snowflake"
        style="left: 20%; animation-duration: 18s; animation-delay: 2s; font-size: 0.75rem;"
      >
        ‚ùÑ
      </div>
      <div
        class="snowflake"
        style="left: 35%; animation-duration: 12s; animation-delay: 4s;"
      >
        ‚ú¶
      </div>
      <div
        class="snowflake"
        style="left: 50%; animation-duration: 20s; animation-delay: 1s; font-size: 1.25rem;"
      >
        ‚ùÑ
      </div>
      <div
        class="snowflake"
        style="left: 65%; animation-duration: 14s; animation-delay: 3s;"
      >
        ‚ú¶
      </div>
      <div
        class="snowflake"
        style="left: 80%; animation-duration: 16s; animation-delay: 5s; font-size: 0.75rem;"
      >
        ‚ùÑ
      </div>
      <div
        class="snowflake"
        style="left: 90%; animation-duration: 13s; animation-delay: 2s;"
      >
        ‚ùÑ
      </div>
    </div>

    <div
      class="bg-grid bg-grid-pattern pointer-events-none fixed inset-0 z-0 h-full w-full opacity-30"
    >
    </div>
    <div
      class="mx-auto mt-2 max-w-7xl px-6 pt-10 pb-24 sm:pb-32 lg:flex lg:px-8 lg:py-40"
    >
      <div class="mx-auto max-w-2xl shrink-0 xl:mx-0 xl:max-w-xl xl:pt-8">
        <div class="mt-8 md:mt-16">
          <a
            href="/visit/"
            class="frosted-glass inline-flex items-center rounded-full border border-sky-200 p-1 pr-3 text-slate-700 shadow-sm transition-all hover:border-sky-300 hover:shadow-md sm:text-base lg:text-sm xl:text-base"
          >
            <span
              class="rounded-full bg-sky-500 px-3 py-0.5 text-sm leading-5 font-semibold text-white"
              >VISIT PARK</span
            >
            <span class="ml-3 text-sm">Plan your winter adventure</span>
            <ChevronRightIcon
              class="ml-2 h-5 w-5 text-sky-400"
              aria-hidden="true"
            />
          </a>
        </div>
        <h1
          class="mt-10 text-4xl font-bold tracking-tight text-slate-900 sm:text-6xl"
        >
          Winter in <span
            class="bg-gradient-to-r from-sky-600 to-cyan-500 bg-clip-text text-transparent"
            >Ute Valley Park</span
          >
        </h1>
        <p class="mt-6 text-lg leading-8 text-slate-600">
          Embrace the beauty of our park during the winter season. Friends of
          Ute Valley Park is dedicated to maintaining, preserving, and educating
          our community about this natural treasure‚Äîin every season.
        </p>
        <div class="mt-10 flex items-center gap-x-6">
          <a
            href="/volunteer/"
            class="rounded-md bg-sky-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
            >Volunteer</a
          >
          <a
            href="/donate/"
            class="group text-sm leading-6 font-semibold text-slate-700"
          >
            Donate <span
              aria-hidden="true"
              class="inline-block transition-transform group-hover:translate-x-1"
              >‚Üí</span
            >
          </a>
        </div>
      </div>
      <div class="relative hidden h-[600px] w-full xl:block">
        <!-- Decorative background blob -->
        <div
          class="absolute top-1/2 left-1/2 -z-10 h-[120%] w-[120%] -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-tr from-sky-100 to-transparent blur-3xl"
        >
        </div>

        <!-- Images with winter-themed labels -->
        <div
          class="reveal stagger-1 float-slow absolute top-0 right-30 z-30 h-auto w-72 rotate-3 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0"
        >
          <div
            class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner"
          >
            <Picture
              src={heroImage2}
              formats={["avif", "webp"]}
              width="300"
              height="450"
              alt="Winter trails at Ute Valley Park"
              class="h-full w-full object-cover"
            />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span
              class="font-handwriting text-lg font-bold tracking-widest text-sky-700 opacity-80"
            >
              WINTER TRAILS
            </span>
          </div>
        </div>

        <div
          class="reveal stagger-2 float-medium absolute top-80 right-10 z-20 h-auto w-72 -rotate-3 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0"
        >
          <div
            class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner"
          >
            <Picture
              src={heroImage}
              formats={["avif", "webp"]}
              width="300"
              height="450"
              alt="Scenic views at Ute Valley Park"
              class="h-full w-full object-cover"
            />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span
              class="font-handwriting text-lg font-bold tracking-widest text-sky-700 opacity-80"
            >
              SNOWY VIEWS
            </span>
          </div>
        </div>

        <div
          class="reveal stagger-3 float-fast absolute top-48 left-10 z-10 h-auto w-72 rotate-6 transform rounded-sm bg-white p-3 pb-16 shadow-2xl transition-all duration-500 hover:scale-105 hover:rotate-0"
        >
          <div
            class="relative h-64 w-full overflow-hidden bg-gray-100 shadow-inner"
          >
            <Picture
              src={heroImage3}
              formats={["avif", "webp"]}
              width="300"
              height="450"
              alt="Frosty morning at Ute Valley Park"
              class="h-full w-full object-cover"
            />
          </div>
          <div class="absolute bottom-0 left-0 w-full p-4 text-center">
            <span
              class="font-handwriting text-lg font-bold tracking-widest text-sky-700 opacity-80"
            >
              FROSTY MORNINGS
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Winter Stewardship Section -->
  <div class="relative bg-gradient-to-b from-white to-sky-50 py-16 sm:py-24">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div class="mx-auto max-w-2xl text-center">
        <span
          class="inline-flex items-center rounded-full bg-sky-100 px-3 py-1 text-sm font-medium text-sky-700"
        >
          ‚ùÑÔ∏è Winter Stewardship
        </span>
        <h2
          class="mt-4 text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl"
        >
          Caring for the Park in Winter
        </h2>
        <p class="mt-4 text-lg leading-8 text-slate-600">
          Winter brings unique beauty‚Äîand unique responsibilities. Help us
          protect our park during the colder months with these stewardship tips.
        </p>
      </div>
      <div
        class="mx-auto mt-12 grid max-w-5xl grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"
      >
        {
          winterTips.map((tip) => (
            <div class="group relative overflow-hidden rounded-2xl bg-white p-6 shadow-md ring-1 ring-slate-900/5 transition-all hover:-translate-y-1 hover:shadow-lg">
              <div class="mb-4 text-4xl">{tip.icon}</div>
              <h3 class="text-lg font-semibold text-slate-900">{tip.title}</h3>
              <p class="mt-2 text-sm leading-6 text-slate-600">
                {tip.description}
              </p>
            </div>
          ))
        }
      </div>
    </div>
  </div>

  <!-- Newsletter with Winter Theme -->
  <section class="my-12">
    <EmailFormWrapper>
      <h2
        slot="heading"
        class="text-2xl font-bold tracking-tight text-white sm:text-4xl"
      >
        Stay Warm & Stay Informed
      </h2>
      <p slot="description" class="mt-2 text-lg text-green-100/90">
        Sign up for seasonal updates and events.
      </p>
    </EmailFormWrapper>
  </section>
  <StatsCard />

  <!-- CTA with Winter Theme -->
  <div class="bg-white">
    <div class="mx-auto max-w-7xl py-12 sm:px-6 sm:py-24 lg:px-8">
      <div
        class="relative isolate overflow-hidden bg-gradient-to-br from-slate-700 via-slate-800 to-sky-900 px-6 pt-16 shadow-2xl sm:rounded-3xl sm:px-16 md:pt-24 lg:flex lg:gap-x-20 lg:px-24 lg:pt-0"
      >
        <svg
          viewBox="0 0 1024 1024"
          class="absolute top-1/2 left-1/2 -z-10 h-[64rem] w-[64rem] -translate-y-1/2 [mask-image:radial-gradient(closest-side,white,transparent)] sm:left-full sm:-ml-80 lg:left-1/2 lg:ml-0 lg:-translate-x-1/2 lg:translate-y-0"
          aria-hidden="true"
        >
          <circle
            cx="512"
            cy="512"
            r="512"
            fill="url(#winter-gradient)"
            fill-opacity="0.5"></circle>
          <defs>
            <radialGradient id="winter-gradient">
              <stop stop-color="#7dd3fc"></stop>
              <stop offset="1" stop-color="#0ea5e9"></stop>
            </radialGradient>
          </defs>
        </svg>
        <div
          class="mx-auto max-w-md text-center lg:mx-0 lg:flex-auto lg:py-32 lg:text-left"
        >
          <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">
            Help Keep the Park Beautiful
          </h2>
          <p class="mt-6 text-lg leading-8 text-sky-100">
            Spring is just around the corner! Join us for trail maintenance,
            wildlife monitoring, and community events throughout the warmer
            months.
          </p>
          <div
            class="mt-10 flex items-center justify-center gap-x-6 lg:justify-start"
          >
            <a
              href="/donate/"
              class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-slate-900 shadow-xs transition-colors hover:bg-sky-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"
              >Donate</a
            >
            <a
              href="/volunteer/"
              class="group text-sm leading-6 font-semibold text-white"
            >
              Volunteer<span
                aria-hidden="true"
                class="inline-block transition-transform group-hover:translate-x-1"
                >‚Üí</span
              >
            </a>
          </div>
        </div>
        <div class="relative mt-16 h-80 lg:mt-8">
          <Image
            class="absolute top-0 left-0 w-[47rem] max-w-none rounded-md bg-white/5 ring-1 ring-white/10"
            src={cta}
            alt="Volunteers working in the park"
            width="900"
          />
        </div>
      </div>
    </div>
  </div>

  <!-- News -->
  <div class="relative px-4 pt-16 pb-20 sm:px-6 lg:px-8 lg:pt-24 lg:pb-28">
    <div class="relative mx-auto max-w-7xl">
      <div class="text-center">
        <h2 class="text-3xl font-bold tracking-tight text-sky-800 sm:text-4xl">
          Ute Valley Park News
        </h2>
        <p class="mt-2 text-lg leading-8 text-slate-600">
          Find out what is happening in and around Ute Valley Park
        </p>
      </div>
      <div
        class="mx-auto mt-16 grid max-w-2xl auto-rows-fr grid-cols-1 gap-8 sm:mt-20 lg:mx-0 lg:max-w-none lg:grid-cols-3"
      >
        {
          publishedNewsEntries
            .sort(
              (a, b) =>
                new Date(a.data.publishedOn).getTime() -
                new Date(b.data.publishedOn).getTime(),
            )
            .reverse()
            .splice(0, 3)
            .map((post) => (
              <Card
                title={post.data.title}
                previewText={post.data.previewText}
                image={post.data.coverImage}
                href={post.id}
                publishedOn={post.data.publishedOn}
                canBeWide={false}
              />
            ))
        }
      </div>
      <div class="mt-8 text-center">
        <a
          href="/news"
          class="font-semibold text-sky-600 transition-colors hover:text-sky-800"
          >More News</a
        >
      </div>
    </div>
  </div>

  <LeaveNoTrace />
</Layout>
