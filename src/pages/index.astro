---
import Layout from '@layouts/Layout.astro';
import Card from '@components/Card.astro';
import LeaveNoTrace from '@components/LeaveNoTrace.astro';
import EmailForm from '@components/EmailForm.vue';

import { ChevronRightIcon } from '@heroicons/vue/24/outline/esm/index.js';
import { Picture } from '@astrojs/image/components';
import heroImage from '../assets/images/ute-valley-park-hero.jpg';

const newsPosts = await Astro.glob('../pages/news/*.md');
---

<Layout title="Home">
  <div class="relative bg-gray-50 overflow-hidden mt-2">
    <div class="relative overflow-hidden pt-16 pb-8">
      <div aria-hidden="true" class="absolute inset-x-0 top-0 h-48 bg-gradient-to-b from-gray-100"></div>
      <div class="relative">
        <div class="lg:mx-auto lg:grid lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-2 lg:gap-24 lg:px-8">
          <div class="mx-auto max-w-xl px-4 sm:px-6 lg:mx-0 lg:max-w-none lg:py-16 lg:px-0">
            <div>
              <div class="mt-6">
                <a href="/visit" class="inline-flex items-center rounded-full bg-slate-800 p-1 pr-2 text-white hover:text-gray-200 sm:text-base lg:text-sm xl:text-base">
                  <span class="rounded-full bg-gradient-to-r from-teal-500 to-green-600 px-3 py-0.5 text-sm font-semibold leading-5 text-white">Visit Ute Valley Park</span>
                  <span class="ml-4 text-sm">Find out more</span>
                  <ChevronRightIcon class="ml-2 h-5 w-5 text-gray-500" aria-hidden="true" />
                </a>
                <h2 class="text-7xl font-bold tracking-tight mt-4">
                  <span class="inline text-gray-900">Friends of</span>
                  <span class="inline text-green-600">Ute Valley Park</span>
                </h2>
                <p class="mt-4 text-lg text-gray-500">
                  <a
                    href="/about"
                    class="text-green-700 underline decoration-green-500 decoration-[0.25rem] motion-safe:transition-all motion-safe:duration-200 hover:decoration-[0.5rem] focus:decoration-[0.5rem] hover:decoration-green-500/50 focus:decoration-green-500/50"
                    >Friends of Ute Valley Park</a
                  > is an officially recognized “Friends” organization by the City of Colorado Springs Parks, Recreation, and Cultural Services Department. Our mission is to maintain, preserve, and provide
                  education for Ute Valley Park.
                </p>
              </div>
            </div>
            <div class="mt-8 border-t border-gray-200 pt-6">
              <EmailForm client:idle />
            </div>
          </div>
          <div class="mx-auto mt-16 flex max-w-2xl sm:mt-24 lg:ml-10 lg:mt-0 lg:mr-0 lg:max-w-none lg:flex-none">
            <div class="max-w-3xl flex-none sm:max-w-5xl lg:max-w-none">
              <div class="-m-2 sm:rounded-xl bg-green-900/5 p-2 ring-1 ring-inset ring-green-900/10 lg:-m-4 lg:rounded-2xl">
                <Picture src={heroImage} widths={[600, 800]} aspectRatio={4 / 3} width="530" height="600" alt="Ute Valley Park" class="w-[50rem] sm:rounded-md ring-1 ring-green-900/10" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="relative pt-12 px-4 sm:px-6 lg:pt-16 lg:px-8">
    <div class="absolute inset-0 flex flex-col" aria-hidden="true">
      <div class="flex-1 from-gray-50 bg-gradient-to-b to-gray-50/20"></div>
      <div class="flex-1"></div>
    </div>
    <div class="relative max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="bg-gradient-to-r from-green-500 to-teal-600 rounded-lg shadow-xl overflow-hidden lg:grid lg:grid-cols-2 lg:gap-4">
        <div class="pt-10 pb-12 px-6 sm:pt-16 sm:px-16 lg:py-16 lg:pr-0 xl:py-20 xl:px-20">
          <div class="lg:self-center">
            <h2 class="text-3xl leading-9 font-extrabold text-white sm:text-4xl sm:leading-10">
              <span class="block">Ready to help?</span>
              <span class="block text-green-900">Donate or Volunteer today.</span>
            </h2>
            <p class="mt-4 text-lg leading-6 text-white">Get involved and help Ute Valley Park by making a tax deductible donation or volunteering.</p>
            <a
              href="/donate"
              class="mt-8 bg-green-100 border border-transparent rounded-md shadow py-3 px-6 inline-flex items-center text-base font-medium text-green-700 hover:text-green-600 focus:outline-none focus:ring-green-300 focus:ring-2 transition duration-150 ease-in-out">
              Donate
            </a>
            <a
              href="/volunteer"
              class="mt-8 bg-teal-100 border border-transparent rounded-md shadow py-3 ml-2 px-6 inline-flex items-center text-base font-medium text-teal-700 hover:text-teal-600 focus:outline-none focus:ring-teal-300 focus:ring-2 transition duration-150 ease-in-out">
              Volunteer
            </a>
          </div>
        </div>
        <div class="relative pb-3/5 -mt-6 md:pb-1/2">
          <picture>
            <source srcset="/images/volunteer.webp" type="image/webp" />
            <source srcset="/images/volunteer.jpg" type="image/jpg" />
            <img
              class="absolute inset-0 w-full h-full transform translate-x-6 translate-y-6 rounded-md object-cover object-left-top sm:translate-x-16 lg:translate-y-20"
              src="/images/volunteer.jpg"
              alt=""
            />
          </picture>
        </div>
      </div>
    </div>
  </div>

  <!-- News -->

  <div class="relative bg-gray-50 pt-16 pb-20 px-4 sm:px-6 lg:pt-24 lg:pb-28 lg:px-8">
    <div class="absolute inset-0">
      <div class="bg-white h-1/3 sm:h-2/3"></div>
    </div>
    <div class="relative max-w-7xl mx-auto">
      <div class="text-center">
        <h2 class="text-3xl leading-9 tracking-tight font-extrabold text-gray-900 sm:text-4xl sm:leading-10">Ute Valley Park News</h2>
        <p class="mt-3 max-w-2xl mx-auto text-xl leading-7 text-gray-500 sm:mt-4">Find out what is happening in and around Ute Valley Park</p>
      </div>
      <div class="mt-12 grid gap-5 max-w-lg mx-auto lg:grid-cols-3 lg:max-w-none">
        {
          newsPosts
            .sort((a, b) => new Date(a.frontmatter.publishedOn).getTime() - new Date(b.frontmatter.publishedOn).getTime())
            .reverse()
            .splice(0, 3)
            .map((post) => (
              <Card
                title={post.frontmatter.title}
                previewText={post.frontmatter.previewText}
                image={post.frontmatter.coverImage}
                href={post.url}
                publishedOn={post.frontmatter.publishedOn}
                minutesRead={post.frontmatter.minutesRead}
                canBeWide={false}
              />
            ))
        }
      </div>
    </div>
  </div>
  <LeaveNoTrace />
</Layout>

<style>
  h1 {
  }
</style>
